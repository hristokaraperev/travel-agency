<!DOCTYPE html>
<html>
<head>
    <title>Event Form</title>
</head>
<body>

<!-- HTML Form -->
<form id="eventForm">
    <select id="location" name="location">
        <option>Loading locations...</option>
    </select>
    <input type="date" id="startDate" name="startDate" placeholder="Start Date">
    <input type="number" id="duration" name="duration" placeholder="Duration (in hours)">
    <input type="submit" value="Submit">
</form>

<!-- JavaScript -->
<script>
    document.getElementById('eventForm').addEventListener('submit', function(e) {
    // Fetch locations and populate the dropdown
    fetch('http://localhost:8080/locations')
    .then(response => response.json())
    .then(data => {
        const locationSelect = document.getElementById('location');
        locationSelect.innerHTML = ''; // Clear the 'loading' option
        data.forEach(location => {
            const option = document.createElement('option');
            option.value = location.id;
            option.textContent = location.city + ', ' + location.country; // Assuming each location has a 'name' field
            locationSelect.appendChild(option);
        });
    })
    .catch(error => console.error('Error:', error));

    // Handle form submission
    document.getElementById('eventForm').addEventListener('submit', function(e) {
        e.preventDefault(); // Prevents default form submission

        var locationId = document.getElementById('location').value;
        var startDate = document.getElementById('startDate').value;
        var duration = document.getElementById('duration').value;

        // Construct URL with query parameters
        var url = new URL('http://localhost:8080/api');
        var params = { location: locationId, startDate: startDate, duration: duration };
        url.search = new URLSearchParams(params).toString();

        // Send HTTP request
        fetch(url, {
            method: 'GET' // Assuming GET request. Change to POST if needed
        })
        .then(response => response.json())
        .then(data => console.log('Success:', data))
        .catch((error) => console.error('Error:', error));
    });
</script>

</body>
</html>
